<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chrono ‚Äî Powered by Resend</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Syne+Mono&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #0c0c0e;
  --surface: #141417;
  --surface2: #1c1c21;
  --border: #2a2a32;
  --accent: #00e5a0;
  --accent-dim: rgba(0,229,160,0.1);
  --accent2: #ff6b35;
  --text: #f0efe8;
  --muted: #666672;
  --muted2: #44444e;
}

body {
  font-family: 'Syne', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image:
    linear-gradient(rgba(0,229,160,0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,229,160,0.025) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none;
  z-index: 0;
}

body::after {
  content: '';
  position: fixed;
  top: -200px; right: -200px;
  width: 600px; height: 600px;
  background: radial-gradient(circle, rgba(0,229,160,0.06) 0%, transparent 70%);
  pointer-events: none;
  z-index: 0;
}

header {
  position: sticky; top: 0; z-index: 100;
  display: flex; align-items: center; justify-content: space-between;
  padding: 1.25rem 3rem;
  background: rgba(12,12,14,0.85);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
}

.logo {
  font-weight: 800; font-size: 1.4rem; letter-spacing: -0.03em;
  display: flex; align-items: center; gap: 0.6rem;
}
.logo-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--accent);
  animation: pulse 2s infinite;
}
@keyframes pulse {
  0%,100% { opacity:1; transform:scale(1); }
  50% { opacity:0.4; transform:scale(0.75); }
}
.logo-badge {
  font-family: 'Syne Mono', monospace; font-size: 0.65rem;
  color: var(--accent); border: 1px solid rgba(0,229,160,0.3);
  padding: 0.2rem 0.6rem; border-radius: 2px; letter-spacing: 0.08em;
}

.main {
  position: relative; z-index: 1;
  max-width: 1140px; margin: 0 auto; padding: 3rem 2rem;
  display: grid; grid-template-columns: 1fr 1.4fr; gap: 3rem;
  align-items: start;
}

.hero-label {
  font-family: 'Syne Mono', monospace; font-size: 0.68rem;
  color: var(--accent); letter-spacing: 0.15em; text-transform: uppercase;
  margin-bottom: 1.2rem; display: flex; align-items: center; gap: 0.5rem;
}
.hero-label::before {
  content: ''; display: inline-block; width: 20px; height: 1px; background: var(--accent);
}

.hero-title {
  font-family: 'Instrument Serif', serif; font-size: 3rem;
  line-height: 1.05; letter-spacing: -0.02em; margin-bottom: 1rem;
}
.hero-title em { font-style: italic; color: var(--accent); }

.hero-sub {
  color: var(--muted); font-size: 0.88rem; line-height: 1.7;
  font-weight: 400; margin-bottom: 2.5rem;
}

.steps { display: flex; flex-direction: column; }
.step {
  display: flex; gap: 1.25rem; padding: 1.25rem 0;
  border-bottom: 1px solid var(--border);
  animation: slideIn 0.5s ease both;
}
.step:last-child { border-bottom: none; }
.step:nth-child(1) { animation-delay: 0.1s; }
.step:nth-child(2) { animation-delay: 0.2s; }
.step:nth-child(3) { animation-delay: 0.3s; }
.step:nth-child(4) { animation-delay: 0.4s; }

@keyframes slideIn {
  from { opacity:0; transform:translateX(-16px); }
  to { opacity:1; transform:translateX(0); }
}

.step-num {
  font-family: 'Syne Mono', monospace; font-size: 0.7rem;
  color: var(--accent); background: var(--accent-dim);
  border: 1px solid rgba(0,229,160,0.2);
  width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;
  border-radius: 4px; flex-shrink: 0; margin-top: 2px;
}
.step-content h3 { font-size: 0.88rem; font-weight: 600; margin-bottom: 0.35rem; }
.step-content p { font-size: 0.8rem; color: var(--muted); line-height: 1.6; font-weight: 400; }
.step-content code {
  font-family: 'Syne Mono', monospace; font-size: 0.76rem;
  color: var(--accent); background: var(--accent-dim); padding: 0.1rem 0.4rem; border-radius: 3px;
}

.resend-card {
  margin-top: 2rem; border: 1px solid rgba(0,229,160,0.2);
  border-radius: 10px; padding: 1.25rem; background: var(--accent-dim);
  animation: slideIn 0.5s 0.5s ease both;
}
.resend-card h3 {
  font-size: 0.75rem; font-weight: 700; color: var(--accent);
  margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;
  letter-spacing: 0.08em; text-transform: uppercase; font-family: 'Syne Mono', monospace;
}
.ri {
  display: flex; align-items: flex-start; gap: 0.6rem; padding: 0.45rem 0;
  font-size: 0.8rem; color: rgba(240,239,232,0.65);
  border-bottom: 1px solid rgba(0,229,160,0.08); line-height: 1.5; font-weight: 400;
}
.ri:last-child { border-bottom: none; padding-bottom: 0; }
.ri-a { color: var(--accent); font-size: 0.65rem; margin-top: 3px; flex-shrink: 0; }

/* APP WINDOW */
.app-window {
  background: var(--surface); border: 1px solid var(--border); border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 0 0 1px rgba(255,255,255,0.03), 0 24px 64px rgba(0,0,0,0.5), 0 0 80px rgba(0,229,160,0.04);
  animation: slideIn 0.5s 0.15s ease both;
}
.wbar {
  background: var(--surface2); padding: 0.9rem 1.25rem;
  display: flex; align-items: center; gap: 1rem; border-bottom: 1px solid var(--border);
}
.wdots { display: flex; gap: 6px; }
.wd { width: 10px; height: 10px; border-radius: 50%; }
.wd.r { background: #ff5f57; } .wd.y { background: #febc2e; } .wd.g { background: #2bc840; }
.wtitle {
  font-family: 'Syne Mono', monospace; font-size: 0.7rem;
  color: var(--muted); letter-spacing: 0.08em; flex: 1; text-align: center;
}

.app-inner { padding: 1.5rem; }

.tabs { display: flex; border-bottom: 1px solid var(--border); margin-bottom: 1.5rem; }
.tab {
  background: none; border: none; color: var(--muted); font-family: 'Syne', sans-serif;
  font-size: 0.8rem; font-weight: 600; padding: 0.6rem 1rem; cursor: pointer;
  border-bottom: 2px solid transparent; margin-bottom: -1px;
  transition: color 0.2s, border-color 0.2s; letter-spacing: 0.02em;
}
.tab.active { color: var(--accent); border-bottom-color: var(--accent); }
.tab:hover:not(.active) { color: var(--text); }

.tab-panel { display: none; }
.tab-panel.active { display: block; }

.ev-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }
.ev-label {
  font-family: 'Syne Mono', monospace; font-size: 0.68rem;
  color: var(--muted); letter-spacing: 0.1em; text-transform: uppercase;
}
.btn-add {
  background: var(--accent); color: #0c0c0e; border: none;
  padding: 0.45rem 1rem; border-radius: 5px; font-family: 'Syne', sans-serif;
  font-size: 0.78rem; font-weight: 700; cursor: pointer;
  transition: opacity 0.2s, transform 0.1s;
}
.btn-add:hover { opacity: 0.85; }
.btn-add:active { transform: scale(0.97); }

.events-list { display: flex; flex-direction: column; gap: 0.5rem; max-height: 300px; overflow-y: auto; padding-right: 2px; }
.events-list::-webkit-scrollbar { width: 3px; }
.events-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.ev-item {
  background: var(--surface2); border: 1px solid var(--border); border-radius: 8px;
  padding: 0.85rem 1rem; display: flex; align-items: center; gap: 0.85rem;
  transition: border-color 0.2s; animation: fadeUp 0.3s ease both;
}
.ev-item:hover { border-color: var(--accent); }
@keyframes fadeUp { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

.ev-color { width: 3px; height: 36px; border-radius: 2px; flex-shrink: 0; }
.ev-info { flex: 1; min-width: 0; }
.ev-name { font-size: 0.87rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 0.2rem; }
.ev-meta { font-family: 'Syne Mono', monospace; font-size: 0.7rem; color: var(--muted); }
.ev-badge {
  font-family: 'Syne Mono', monospace; font-size: 0.65rem;
  padding: 0.2rem 0.5rem; border-radius: 3px; flex-shrink: 0; letter-spacing: 0.03em;
}
.b-soon { background: rgba(255,107,53,0.15); color: #ff6b35; border: 1px solid rgba(255,107,53,0.3); }
.b-ok { background: rgba(0,229,160,0.1); color: var(--accent); border: 1px solid rgba(0,229,160,0.2); }
.b-past { background: var(--surface2); color: var(--muted2); border: 1px solid var(--border); }

.btn-rm { background: none; border: none; color: var(--muted2); cursor: pointer; font-size: 0.9rem; transition: color 0.2s; }
.btn-rm:hover { color: #ff6b35; }

.empty { text-align: center; padding: 3rem 1rem; color: var(--muted); font-size: 0.82rem; font-weight: 400; }
.empty-icon { font-size: 2rem; margin-bottom: 0.75rem; opacity: 0.5; }

/* Config */
.cfg-section {
  background: var(--surface2); border: 1px solid var(--border); border-radius: 8px;
  padding: 1.25rem; margin-bottom: 1rem;
}
.cfg-title { font-family: 'Syne Mono', monospace; font-size: 0.65rem; color: var(--accent); letter-spacing: 0.12em; text-transform: uppercase; margin-bottom: 1rem; }
.frow { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 0.75rem; }
.frow.full { grid-template-columns: 1fr; }
.frow:last-child { margin-bottom: 0; }
.f label { display: block; font-family: 'Syne Mono', monospace; font-size: 0.65rem; color: var(--muted); letter-spacing: 0.06em; margin-bottom: 0.3rem; text-transform: uppercase; }
.f input, .f select {
  width: 100%; padding: 0.6rem 0.8rem; background: var(--bg);
  border: 1px solid var(--border); border-radius: 6px; font-family: 'Syne', sans-serif;
  font-size: 0.82rem; color: var(--text); outline: none; transition: border-color 0.2s;
}
.f input:focus, .f select:focus { border-color: var(--accent); }
.f input::placeholder { color: var(--muted2); }
.f select option { background: var(--surface2); }

.btn-primary {
  width: 100%; padding: 0.8rem; background: var(--accent); color: var(--bg);
  border: none; border-radius: 7px; font-family: 'Syne', sans-serif;
  font-size: 0.85rem; font-weight: 700; cursor: pointer; transition: opacity 0.2s;
}
.btn-primary:hover { opacity: 0.85; }

/* Code */
.code-note { font-size: 0.78rem; color: var(--muted); margin-bottom: 0.75rem; line-height: 1.6; font-weight: 400; }
.code-wrap { position: relative; }
.code-block {
  background: var(--bg); border: 1px solid var(--border); border-radius: 8px;
  padding: 1.25rem; font-family: 'Syne Mono', monospace; font-size: 0.72rem;
  line-height: 1.75; overflow-x: auto; max-height: 320px; overflow-y: auto; color: #c9d1d9;
}
.code-block::-webkit-scrollbar { width: 3px; height: 3px; }
.code-block::-webkit-scrollbar-thumb { background: var(--border); }
.cm { color: #555566; } .ky { color: #c084fc; } .st { color: #a3e635; }
.fn { color: #60a5fa; } .vr { color: #f9a8d4; } .nm { color: #fb923c; }

.btn-copy {
  position: absolute; top: 0.6rem; right: 0.6rem;
  background: var(--surface2); border: 1px solid var(--border); color: var(--muted);
  font-family: 'Syne Mono', monospace; font-size: 0.65rem; padding: 0.3rem 0.6rem;
  border-radius: 4px; cursor: pointer; transition: color 0.2s, border-color 0.2s; letter-spacing: 0.05em;
}
.btn-copy:hover { color: var(--accent); border-color: var(--accent); }

.env-box {
  margin-top: 0.75rem; padding: 0.85rem;
  background: var(--surface2); border: 1px solid var(--border); border-radius: 8px;
  font-family: 'Syne Mono', monospace; font-size: 0.68rem; color: var(--muted); line-height: 1.8;
}

/* Modal */
.overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(6px);
  z-index: 200; display: flex; align-items: center; justify-content: center;
  opacity: 0; pointer-events: none; transition: opacity 0.2s;
}
.overlay.open { opacity: 1; pointer-events: all; }
.modal {
  background: var(--surface); border: 1px solid var(--border); border-radius: 14px;
  width: 440px; max-width: 95vw;
  box-shadow: 0 32px 80px rgba(0,0,0,0.6), 0 0 0 1px rgba(0,229,160,0.1);
  transform: translateY(20px) scale(0.97); transition: transform 0.25s ease;
}
.overlay.open .modal { transform: translateY(0) scale(1); }

.modal-head {
  padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
}
.modal-head h3 { font-size: 1rem; font-weight: 700; letter-spacing: -0.01em; }
.btn-x { background: none; border: none; color: var(--muted); cursor: pointer; font-size: 1.1rem; transition: color 0.2s; }
.btn-x:hover { color: var(--text); }

.modal-body { padding: 1.5rem; display: flex; flex-direction: column; gap: 0.85rem; }
.mf label { display: block; font-family: 'Syne Mono', monospace; font-size: 0.65rem; color: var(--muted); letter-spacing: 0.06em; text-transform: uppercase; margin-bottom: 0.3rem; }
.mf input, .mf select {
  width: 100%; padding: 0.65rem 0.85rem; background: var(--surface2);
  border: 1px solid var(--border); border-radius: 7px; font-family: 'Syne', sans-serif;
  font-size: 0.85rem; color: var(--text); outline: none; transition: border-color 0.2s;
}
.mf input:focus, .mf select:focus { border-color: var(--accent); }
.mf input::placeholder { color: var(--muted2); }
.mf select option { background: var(--surface2); }
.mrow { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }

.modal-foot { padding: 1rem 1.5rem; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 0.75rem; }
.btn-cancel {
  background: var(--surface2); border: 1px solid var(--border); color: var(--muted);
  padding: 0.6rem 1.25rem; border-radius: 6px; font-family: 'Syne', sans-serif;
  font-size: 0.82rem; cursor: pointer; transition: color 0.2s;
}
.btn-cancel:hover { color: var(--text); }
.btn-save {
  background: var(--accent); border: none; color: var(--bg);
  padding: 0.6rem 1.5rem; border-radius: 6px; font-family: 'Syne', sans-serif;
  font-size: 0.82rem; font-weight: 700; cursor: pointer; transition: opacity 0.2s;
}
.btn-save:hover { opacity: 0.85; }

.toast {
  position: fixed; bottom: 2rem; right: 2rem;
  background: var(--surface2); border: 1px solid var(--border); color: var(--text);
  padding: 0.85rem 1.25rem; border-radius: 8px; font-size: 0.82rem; z-index: 300;
  transform: translateY(80px); opacity: 0; transition: transform 0.3s ease, opacity 0.3s ease;
  box-shadow: 0 8px 24px rgba(0,0,0,0.4); max-width: 320px; font-weight: 500;
}
.toast.show { transform: translateY(0); opacity: 1; }
.toast.success { border-left: 3px solid var(--accent); }
.toast.error { border-left: 3px solid #ff6b35; }

@media (max-width: 768px) {
  .main { grid-template-columns: 1fr; padding: 1.5rem 1rem; gap: 2rem; }
  header { padding: 1rem 1.5rem; }
  .hero-title { font-size: 2.2rem; }
}
</style>
</head>
<body>

<header>
  <div class="logo"><div class="logo-dot"></div>Chrono</div>
  <div class="logo-badge">RESEND</div>
</header>

<div class="main">
  <div>
    <div class="hero-label">Smart Calendar Reminders</div>
    <h1 class="hero-title">Inbox-first.<br><em>Never spam.</em></h1>
    <p class="hero-sub">Powered by Resend ‚Äî built for developers, trusted by inboxes. Follow these steps once, then manage everything on the right.</p>

    <div class="steps">
      <div class="step">
        <div class="step-num">01</div>
        <div class="step-content">
          <h3>Create a free Resend account</h3>
          <p>Go to <code>resend.com</code> and sign up. 3,000 emails/month and 100/day free ‚Äî no credit card needed.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-num">02</div>
        <div class="step-content">
          <h3>Add & verify your domain</h3>
          <p>Resend ‚Üí Domains ‚Üí Add Domain. Resend gives you DNS records (SPF, DKIM) to paste into your registrar. This is what keeps emails out of spam. ~5 min setup.</p>
        </div>
      </div>
      <div class="step">
        <div class="step-num">03</div>
        <div class="step-content">
          <h3>Generate an API key</h3>
          <p>Resend ‚Üí API Keys ‚Üí Create API Key. Set permission to <code>Sending access</code> only. Paste it in the Config tab ‚Üí</p>
        </div>
      </div>
      <div class="step">
        <div class="step-num">04</div>
        <div class="step-content">
          <h3>Deploy the backend</h3>
          <p>Copy the Node.js code from the Code tab. Deploy free on <code>Railway</code> or <code>Render</code> with your env vars. Reminders run automatically every hour.</p>
        </div>
      </div>
    </div>

    <div class="resend-card">
      <h3>‚ö° Why Resend?</h3>
      <div class="ri"><div class="ri-a">‚ñ∏</div><div>3,000 emails/month free ‚Äî no credit card required</div></div>
      <div class="ri"><div class="ri-a">‚ñ∏</div><div>Built on AWS SES infrastructure ‚Äî rock-solid uptime, zero recent incidents</div></div>
      <div class="ri"><div class="ri-a">‚ñ∏</div><div>One-step domain verification auto-configures SPF + DKIM</div></div>
      <div class="ri"><div class="ri-a">‚ñ∏</div><div>Clean dashboard with delivery logs, open tracking & webhooks</div></div>
      <div class="ri"><div class="ri-a">‚ñ∏</div><div>Modern REST API ‚Äî no legacy SDK overhead</div></div>
    </div>
  </div>

  <!-- APP -->
  <div>
    <div class="app-window">
      <div class="wbar">
        <div class="wdots"><div class="wd r"></div><div class="wd y"></div><div class="wd g"></div></div>
        <div class="wtitle">CHRONO ‚Äî RESEND EDITION</div>
        <div style="width:52px"></div>
      </div>
      <div class="app-inner">
        <div class="tabs">
          <button class="tab active" onclick="switchTab('events',this)">üìÖ Events</button>
          <button class="tab" onclick="switchTab('config',this)">‚öôÔ∏è Config</button>
          <button class="tab" onclick="switchTab('code',this)">&lt;/&gt; Code</button>
        </div>

        <div class="tab-panel active" id="tab-events">
          <div class="ev-header">
            <span class="ev-label">Upcoming Events</span>
            <button class="btn-add" onclick="openModal()">+ Add Event</button>
          </div>
          <div class="events-list" id="eventsList">
            <div class="empty"><div class="empty-icon">üóì</div>No events yet ‚Äî add your first one.</div>
          </div>
        </div>

        <div class="tab-panel" id="tab-config">
          <div class="cfg-section">
            <div class="cfg-title">‚úâÔ∏è Resend Configuration</div>
            <div class="frow">
              <div class="f">
                <label>Your Email (receive alerts)</label>
                <input type="email" id="toEmail" placeholder="you@gmail.com" oninput="saveConfig()">
              </div>
              <div class="f">
                <label>From Email (your domain)</label>
                <input type="email" id="fromEmail" placeholder="alerts@yourdomain.com" oninput="saveConfig()">
              </div>
            </div>
            <div class="frow full">
              <div class="f">
                <label>Resend API Key</label>
                <input type="password" id="apiKey" placeholder="re_xxxxxxxxxxxxxxxxxxxx" oninput="saveConfig()">
              </div>
            </div>
            <div class="frow">
              <div class="f">
                <label>Default Reminder</label>
                <select id="defaultReminder" onchange="saveConfig()">
                  <option value="1">1 hour before</option>
                  <option value="2">2 hours before</option>
                  <option value="6">6 hours before</option>
                  <option value="24" selected>24 hours before</option>
                  <option value="48">48 hours before</option>
                </select>
              </div>
              <div class="f">
                <label>From Name</label>
                <input type="text" id="fromName" placeholder="My Calendar" oninput="saveConfig()">
              </div>
            </div>
          </div>
          <button class="btn-primary" onclick="testEmail()">üì® Send Test Email</button>
        </div>

        <div class="tab-panel" id="tab-code">
          <p class="code-note">Node.js backend using the official <strong style="color:var(--text)">Resend SDK</strong>. Deploy to Railway or Render ‚Äî set your env vars and you're live.</p>
          <div class="code-wrap">
            <button class="btn-copy" onclick="copyCode()">COPY</button>
            <div class="code-block" id="codeBlock"><span class="cm">// server.js ‚Äî Chrono x Resend</span>
<span class="cm">// npm install express resend node-cron</span>

<span class="ky">const</span> <span class="vr">express</span> = <span class="fn">require</span>(<span class="st">'express'</span>);
<span class="ky">const</span> { <span class="vr">Resend</span> } = <span class="fn">require</span>(<span class="st">'resend'</span>);
<span class="ky">const</span> <span class="vr">cron</span> = <span class="fn">require</span>(<span class="st">'node-cron'</span>);
<span class="ky">const</span> <span class="vr">fs</span> = <span class="fn">require</span>(<span class="st">'fs'</span>);

<span class="ky">const</span> <span class="vr">resend</span> = <span class="ky">new</span> <span class="fn">Resend</span>(process.env.<span class="vr">RESEND_API_KEY</span>);
<span class="ky">const</span> <span class="vr">app</span> = <span class="fn">express</span>();
<span class="vr">app</span>.<span class="fn">use</span>(<span class="vr">express</span>.<span class="fn">json</span>());

<span class="cm">// Load events from file (swap for a DB in production)</span>
<span class="ky">let</span> <span class="vr">events</span> = [];
<span class="ky">try</span> {
  <span class="vr">events</span> = <span class="vr">JSON</span>.<span class="fn">parse</span>(<span class="vr">fs</span>.<span class="fn">readFileSync</span>(<span class="st">'events.json'</span>, <span class="st">'utf8'</span>));
} <span class="ky">catch</span> (e) { <span class="vr">events</span> = []; }

<span class="ky">const</span> <span class="fn">save</span> = () =>
  <span class="vr">fs</span>.<span class="fn">writeFileSync</span>(<span class="st">'events.json'</span>, <span class="vr">JSON</span>.<span class="fn">stringify</span>(<span class="vr">events</span>, <span class="ky">null</span>, <span class="nm">2</span>));

<span class="cm">// REST endpoints</span>
<span class="vr">app</span>.<span class="fn">get</span>(<span class="st">'/events'</span>, (_req, res) => <span class="vr">res</span>.<span class="fn">json</span>(<span class="vr">events</span>));

<span class="vr">app</span>.<span class="fn">post</span>(<span class="st">'/events'</span>, (req, res) => {
  <span class="ky">const</span> <span class="vr">ev</span> = { ...req.body, id: <span class="fn">Date</span>.<span class="fn">now</span>(), reminded: <span class="ky">false</span> };
  <span class="vr">events</span>.<span class="fn">push</span>(<span class="vr">ev</span>);
  <span class="fn">save</span>();
  <span class="vr">res</span>.<span class="fn">json</span>(<span class="vr">ev</span>);
});

<span class="vr">app</span>.<span class="fn">delete</span>(<span class="st">'/events/:id'</span>, (req, res) => {
  <span class="vr">events</span> = <span class="vr">events</span>.<span class="fn">filter</span>(e => e.id != req.params.id);
  <span class="fn">save</span>();
  <span class="vr">res</span>.<span class="fn">json</span>({ ok: <span class="ky">true</span> });
});

<span class="cm">// Runs every hour ‚Äî checks for events needing a reminder</span>
<span class="vr">cron</span>.<span class="fn">schedule</span>(<span class="st">'0 * * * *'</span>, <span class="ky">async</span> () => {
  <span class="ky">const</span> <span class="vr">now</span> = <span class="ky">new</span> <span class="fn">Date</span>();
  <span class="ky">let</span> <span class="vr">changed</span> = <span class="ky">false</span>;

  <span class="ky">for</span> (<span class="ky">const</span> <span class="vr">ev</span> <span class="ky">of</span> <span class="vr">events</span>) {
    <span class="ky">if</span> (<span class="vr">ev</span>.reminded) <span class="ky">continue</span>;
    <span class="ky">const</span> <span class="vr">hoursLeft</span> = (<span class="ky">new</span> <span class="fn">Date</span>(<span class="vr">ev</span>.datetime) - <span class="vr">now</span>) / <span class="nm">3_600_000</span>;

    <span class="ky">if</span> (<span class="vr">hoursLeft</span> > <span class="nm">0</span> && <span class="vr">hoursLeft</span> <= <span class="vr">ev</span>.reminderHours) {
      <span class="ky">await</span> <span class="vr">resend</span>.emails.<span class="fn">send</span>({
        from: `${process.env.<span class="vr">FROM_NAME</span>} &lt;${process.env.<span class="vr">FROM_EMAIL</span>}&gt;`,
        to: [process.env.<span class="vr">TO_EMAIL</span>],
        subject: `‚è∞ ${<span class="vr">ev</span>.title} ‚Äî coming up soon`,
        html: <span class="fn">buildEmail</span>(<span class="vr">ev</span>),
        tags: [{ name: <span class="st">'category'</span>, value: <span class="st">'reminder'</span> }],
      });
      <span class="vr">ev</span>.reminded = <span class="ky">true</span>;
      <span class="vr">changed</span> = <span class="ky">true</span>;
      <span class="vr">console</span>.<span class="fn">log</span>(`‚úì Reminded: ${<span class="vr">ev</span>.title}`);
    }
  }
  <span class="ky">if</span> (<span class="vr">changed</span>) <span class="fn">save</span>();
});

<span class="ky">function</span> <span class="fn">buildEmail</span>(ev) {
  <span class="ky">const</span> <span class="vr">dt</span> = <span class="ky">new</span> <span class="fn">Date</span>(ev.datetime).<span class="fn">toLocaleString</span>(<span class="st">'en-US'</span>, {
    weekday: <span class="st">'long'</span>, month: <span class="st">'long'</span>, day: <span class="st">'numeric'</span>,
    hour: <span class="st">'2-digit'</span>, minute: <span class="st">'2-digit'</span>
  });
  <span class="ky">return</span> <span class="st">`
  &lt;div style="font-family:sans-serif;max-width:520px;margin:0 auto"&gt;
    &lt;div style="background:#0c0c0e;padding:28px;border-radius:12px"&gt;
      &lt;p style="color:#00e5a0;font-size:11px;letter-spacing:.12em;margin:0 0 14px"&gt;
        CHRONO REMINDER&lt;/p&gt;
      &lt;h1 style="color:#f0efe8;font-size:22px;margin:0 0 8px"&gt;
        ‚è∞ ${ev.title}&lt;/h1&gt;
      &lt;p style="color:#666672;font-size:14px;margin:0 0 20px"&gt;${dt}&lt;/p&gt;
      ${ev.notes
        ? `&lt;p style="color:#c0bfb8;font-size:14px;
            border-left:2px solid #00e5a0;padding-left:12px"&gt;
            ${ev.notes}&lt;/p&gt;`
        : ''}
    &lt;/div&gt;
    &lt;p style="font-size:11px;color:#888;text-align:center;margin-top:16px"&gt;
      Sent by Chrono ¬∑ &lt;a href="#" style="color:#888"&gt;Unsubscribe&lt;/a&gt;
    &lt;/p&gt;
  &lt;/div&gt;`</span>;
}

<span class="vr">app</span>.<span class="fn">listen</span>(<span class="nm">3000</span>, () =>
  <span class="vr">console</span>.<span class="fn">log</span>(<span class="st">'üü¢ Chrono running on :3000'</span>));
</div>
          </div>
          <div class="env-box">
            <span style="color:var(--accent)">ENV VARS TO SET</span><br>
            RESEND_API_KEY=re_xxxxxxxxxxxx<br>
            <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3b6f74647e767a72770642544e7b5c565a525715585456">[email&#160;protected]</a><br>
            <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="dd9b8f92908298909c9491e0bcb1b8afa9ae9da4b2a8afb9b2b0bcb4b3f3beb2b0">[email&#160;protected]</a><br>
            FROM_NAME=My Calendar
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="overlay" id="overlay">
  <div class="modal">
    <div class="modal-head">
      <h3>New Event</h3>
      <button class="btn-x" onclick="closeModal()">‚úï</button>
    </div>
    <div class="modal-body">
      <div class="mf">
        <label>Event Title *</label>
        <input type="text" id="newTitle" placeholder="Team standup, Doctor appointment...">
      </div>
      <div class="mrow">
        <div class="mf">
          <label>Date & Time *</label>
          <input type="datetime-local" id="newDatetime">
        </div>
        <div class="mf">
          <label>Remind me</label>
          <select id="newReminder">
            <option value="1">1 hour before</option>
            <option value="2">2 hours before</option>
            <option value="6">6 hours before</option>
            <option value="24" selected>24 hours before</option>
            <option value="48">48 hours before</option>
          </select>
        </div>
      </div>
      <div class="mf">
        <label>Notes (optional)</label>
        <input type="text" id="newNotes" placeholder="Zoom link, location, prep notes...">
      </div>
      <div class="mf">
        <label>Color</label>
        <select id="newColor">
          <option value="#00e5a0">üü¢ Mint</option>
          <option value="#ff6b35">üü† Orange</option>
          <option value="#c084fc">üü£ Purple</option>
          <option value="#60a5fa">üîµ Blue</option>
          <option value="#f9a8d4">ü©∑ Pink</option>
        </select>
      </div>
    </div>
    <div class="modal-foot">
      <button class="btn-cancel" onclick="closeModal()">Cancel</button>
      <button class="btn-save" onclick="addEvent()">Save Event</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
const API = 'https://chrono-calendar-production.up.railway.app';
let events = [];
let config = JSON.parse(localStorage.getItem('chronoConfigR') || '{}');

async function loadEvents() {
  try {
    const res = await fetch(`${API}/events`);
    events = await res.json();
    renderEvents();
  } catch(e) {
    showToast('‚ö†Ô∏è Could not reach backend.', 'error');
  }
}

window.onload = () => {
  if (config.toEmail) document.getElementById('toEmail').value = config.toEmail;
  if (config.fromEmail) document.getElementById('fromEmail').value = config.fromEmail;
  if (config.apiKey) document.getElementById('apiKey').value = config.apiKey;
  if (config.defaultReminder) document.getElementById('defaultReminder').value = config.defaultReminder;
  if (config.fromName) document.getElementById('fromName').value = config.fromName;
  const now = new Date();
  now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
  document.getElementById('newDatetime').min = now.toISOString().slice(0,16);
  loadEvents();
};

function saveConfig() {
  config = {
    toEmail: document.getElementById('toEmail').value,
    fromEmail: document.getElementById('fromEmail').value,
    apiKey: document.getElementById('apiKey').value,
    defaultReminder: document.getElementById('defaultReminder').value,
    fromName: document.getElementById('fromName').value
  };
  localStorage.setItem('chronoConfigR', JSON.stringify(config));
}

function switchTab(name, el) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('tab-' + name).classList.add('active');
}

function openModal() { document.getElementById('overlay').classList.add('open'); document.getElementById('newTitle').focus(); }
function closeModal() {
  document.getElementById('overlay').classList.remove('open');
  ['newTitle','newNotes','newDatetime'].forEach(id => document.getElementById(id).value = '');
}

async function addEvent() {
  const title = document.getElementById('newTitle').value.trim();
  const datetime = document.getElementById('newDatetime').value;
  if (!title || !datetime) { showToast('Please add a title and date.', 'error'); return; }
  const ev = {
    title, datetime,
    reminderHours: parseInt(document.getElementById('newReminder').value),
    notes: document.getElementById('newNotes').value.trim(),
    color: document.getElementById('newColor').value,
  };
  try {
    const res = await fetch(`${API}/events`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(ev)
    });
    const saved = await res.json();
    events.push(saved);
    renderEvents();
    closeModal();
    showToast(`‚úÖ "${title}" saved ‚Äî reminder set ${ev.reminderHours}h before.`, 'success');
  } catch(e) {
    showToast('‚ö†Ô∏è Failed to save. Is Railway running?', 'error');
  }
}

async function removeEvent(id) {
  try {
    await fetch(`${API}/events/${id}`, { method: 'DELETE' });
    events = events.filter(e => e.id !== id);
    renderEvents();
  } catch(e) {
    showToast('‚ö†Ô∏è Failed to delete event.', 'error');
  }
}

function renderEvents() {
  const list = document.getElementById('eventsList');
  if (!events.length) {
    list.innerHTML = '<div class="empty"><div class="empty-icon">üóì</div>No events yet ‚Äî add your first one.</div>';
    return;
  }
  const sorted = [...events].sort((a,b) => new Date(a.datetime) - new Date(b.datetime));
  list.innerHTML = sorted.map(ev => {
    const d = new Date(ev.datetime), now = new Date();
    const hrs = (d - now) / 3600000;
    const [badge, bc] = hrs < 0 ? ['Past','b-past'] : hrs <= ev.reminderHours ? ['Soon!','b-soon'] : [Math.round(hrs)+'h away','b-ok'];
    return `<div class="ev-item">
      <div class="ev-color" style="background:${ev.color}"></div>
      <div class="ev-info">
        <div class="ev-name">${ev.title}</div>
        <div class="ev-meta">${d.toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric'})} ¬∑ ${d.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'})} ¬∑ üîî ${ev.reminderHours}h${ev.notes ? ' ¬∑ '+ev.notes.slice(0,28) : ''}</div>
      </div>
      <div class="ev-badge ${bc}">${badge}</div>
      <button class="btn-rm" onclick="removeEvent(${ev.id})">‚úï</button>
    </div>`;
  }).join('');
}

function testEmail() {
  showToast('üì® Test email will fire at next hourly check!', 'success');
}

function copyCode() {
  navigator.clipboard.writeText(document.getElementById('codeBlock').innerText)
    .then(() => showToast('‚úÖ Code copie